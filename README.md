# Pulsoid to VRChat OSC Bridge (Pythonç‰ˆ)

è¿™æ˜¯ä¸€ä¸ªç”¨Pythoné‡æ–°å®ç°çš„Pulsoidå¿ƒç‡æ•°æ®åˆ°VRChat OSCæ¡¥æ¥ç¨‹åºï¼Œå…·æœ‰æ›´å¥½çš„ç¨³å®šæ€§å’Œé”™è¯¯å¤„ç†èƒ½åŠ›ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”— **ç¨³å®šçš„WebSocketè¿æ¥**: æ”¯æŒè‡ªåŠ¨é‡è¿å’ŒæŒ‡æ•°é€€é¿ç­–ç•¥
- ğŸ® **VRChat OSCé›†æˆ**: å°†å¿ƒç‡æ•°æ®å®æ—¶å‘é€åˆ°VRChat Avatarå‚æ•°
- ğŸ” **å®‰å…¨çš„è®¤è¯ç®¡ç†**: è‡ªåŠ¨ä¿å­˜å’Œè¯»å–Pulsoidè®¤è¯token
- ğŸ“Š **å¤šç§å¿ƒç‡å‚æ•°**: 
  - `Heartrate`: å½’ä¸€åŒ–å¿ƒç‡å€¼ (-1.0 åˆ° 1.0)
  - `HeartRateFloat`: å½’ä¸€åŒ–å¿ƒç‡å€¼ (-1.0 åˆ° 1.0)
  - `Heartrate2`: å½’ä¸€åŒ–å¿ƒç‡å€¼ (0.0 åˆ° 1.0)
  - `HeartRateFloat01`: å½’ä¸€åŒ–å¿ƒç‡å€¼ (0.0 åˆ° 1.0)
  - `Heartrate3`: åŸå§‹å¿ƒç‡å€¼ (bpm)
  - `HeartRateInt`: åŸå§‹å¿ƒç‡å€¼ (bpm)
  - `HeartBeatToggle`: å¿ƒè·³åˆ‡æ¢çŠ¶æ€

## ç³»ç»Ÿè¦æ±‚

- Python 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬
- Windows 10/11 æˆ– Linux/macOS
- VRChat (æ”¯æŒOSC)

## å®‰è£…å’Œä½¿ç”¨

### æ–¹æ³•1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ (æ¨è)

#### Windows:
```bash
# åŒå‡»è¿è¡Œæˆ–åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ
run.bat
```

#### Linux/macOS:
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x run.sh

# è¿è¡Œè„šæœ¬
./run.sh
```

å¯åŠ¨è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- æ£€æŸ¥Pythonç¯å¢ƒ
- åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
- å®‰è£…ä¾èµ–åŒ…
- å¯åŠ¨ç¨‹åº

### æ–¹æ³•2: æ‰‹åŠ¨å®‰è£…

1. **å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®**
2. **å®‰è£…ä¾èµ–**:
   ```bash
   pip install -r requirements.txt
   ```
3. **è¿è¡Œç¨‹åº**:
   ```bash
   python main.py
   ```

## é¦–æ¬¡ä½¿ç”¨

1. è¿è¡Œç¨‹åºåï¼Œå¦‚æœæ²¡æœ‰ä¿å­˜çš„tokenï¼Œä¼šè‡ªåŠ¨æ‰“å¼€Pulsoidè®¤è¯é¡µé¢
2. åœ¨æµè§ˆå™¨ä¸­ç™»å½•Pulsoidå¹¶æˆæƒåº”ç”¨
3. å¤åˆ¶è·å¾—çš„tokenå¹¶ç²˜è´´åˆ°ç¨‹åºä¸­
4. Tokenä¼šè‡ªåŠ¨ä¿å­˜åˆ°å½“å‰ç›®å½•çš„ `token.txt` æ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡è¿è¡Œæ—¶æ— éœ€é‡æ–°è¾“å…¥

## VRChatè®¾ç½®

åœ¨VRChatä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹OSCå‚æ•°ï¼š

### å½’ä¸€åŒ–å¿ƒç‡å‚æ•° (Floatç±»å‹)
- `/avatar/parameters/Heartrate` (float): å½’ä¸€åŒ–å¿ƒç‡å€¼ï¼ŒèŒƒå›´ -1.0 åˆ° 1.0 (è®¡ç®—å…¬å¼: heart_rate / 127 - 1)
- `/avatar/parameters/HeartRateFloat` (float): åŒä¸Šï¼Œåˆ«åå‚æ•°
- `/avatar/parameters/Heartrate2` (float): å½’ä¸€åŒ–å¿ƒç‡å€¼ï¼ŒèŒƒå›´ 0.0 åˆ° 1.0 (è®¡ç®—å…¬å¼: heart_rate / 255)
- `/avatar/parameters/HeartRateFloat01` (float): åŒä¸Šï¼Œåˆ«åå‚æ•°

### åŸå§‹å¿ƒç‡å‚æ•° (Integerç±»å‹)
- `/avatar/parameters/Heartrate3` (int): åŸå§‹å¿ƒç‡å€¼ (bpm)
- `/avatar/parameters/HeartRateInt` (int): åŒä¸Šï¼Œåˆ«åå‚æ•°

### å¿ƒè·³çŠ¶æ€å‚æ•° (Booleanç±»å‹)
- `/avatar/parameters/HeartBeatToggle` (bool): å¿ƒè·³åˆ‡æ¢çŠ¶æ€ï¼Œæ¯æ¬¡å¿ƒè·³æ—¶åˆ‡æ¢true/false

### ä½¿ç”¨å»ºè®®

**é€‰æ‹©åˆé€‚çš„å‚æ•°ç±»å‹ï¼š**
- **åŠ¨ç”»æ§åˆ¶**: ä½¿ç”¨ `Heartrate2` æˆ– `HeartRateFloat01` (0.0-1.0èŒƒå›´)ï¼Œé€‚åˆæ§åˆ¶åŠ¨ç”»å¼ºåº¦
- **é¢œè‰²å˜åŒ–**: ä½¿ç”¨ `Heartrate` æˆ– `HeartRateFloat` (-1.0åˆ°1.0èŒƒå›´)ï¼Œå¯ä»¥å®ç°åŒå‘é¢œè‰²æ¸å˜
- **æ•°å€¼æ˜¾ç¤º**: ä½¿ç”¨ `Heartrate3` æˆ– `HeartRateInt` (åŸå§‹bpmå€¼)ï¼Œé€‚åˆåœ¨UIä¸­æ˜¾ç¤ºå…·ä½“æ•°å€¼
- **å¿ƒè·³æ•ˆæœ**: ä½¿ç”¨ `HeartBeatToggle` (å¸ƒå°”å€¼)ï¼Œé€‚åˆåˆ¶ä½œé—ªçƒæˆ–è·³åŠ¨æ•ˆæœ

### ç¤ºä¾‹Avatar

[Vard](https://twitter.com/VardFree) åˆ¶ä½œäº†è¯¥Avatarï¼Œä½ å¯ä»¥ä½¿ç”¨ä»–çš„Avataræ¥æµ‹è¯•ï¼š

ğŸ“¦ **ä¸‹è½½åœ°å€**: [Example_Avatar.unitypackage](https://github.com/vard88508/vrc-osc-miband-hrm/releases)

è¯¥Avatarä½¿ç”¨äº† [RED_SIM çš„ Simple counter shader](https://patreon.com/posts/simple-counter-62864361) æ¥æ˜¾ç¤ºæ•°å­—ã€‚

**å‚æ•°é…ç½®ï¼š**
- ä½¿ç”¨å‚æ•°: `Heartrate`
- æ•°æ®ç±»å‹: æµ®ç‚¹(Float)
- æ•°å€¼èŒƒå›´: -1.0 (0bpm) åˆ° 1.0 (255bpm)

## é…ç½®

å¯ä»¥åœ¨ `config.py` ä¸­ä¿®æ”¹ä»¥ä¸‹è®¾ç½®ï¼š

- OSCæœåŠ¡å™¨åœ°å€å’Œç«¯å£
- é‡è¿å‚æ•°
- å¿ƒç‡èŒƒå›´è®¾ç½®
- æ—¥å¿—çº§åˆ«

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **"æ— æ³•è¿æ¥åˆ°Pulsoid"**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤tokenæ˜¯å¦æœ‰æ•ˆ
   - é‡æ–°è¿›è¡Œè®¤è¯

2. **"OSCè¿æ¥å¤±è´¥"**
   - ç¡®è®¤VRChatæ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥OSCç«¯å£æ˜¯å¦è¢«å ç”¨
   - ç¡®è®¤VRChat OSCåŠŸèƒ½å·²å¯ç”¨

3. **"ä¾èµ–åŒ…å®‰è£…å¤±è´¥"**
   - ç¡®è®¤Pythonç‰ˆæœ¬ >= 3.7
   - å°è¯•å‡çº§pip: `python -m pip install --upgrade pip`
   - ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ

### æ—¥å¿—æ–‡ä»¶

ç¨‹åºä¼šåœ¨è¿è¡Œç›®å½•ç”Ÿæˆ `pulsoid_vrchat.log` æ—¥å¿—æ–‡ä»¶ï¼ŒåŒ…å«è¯¦ç»†çš„è¿è¡Œä¿¡æ¯ã€‚

## é¡¹ç›®ç»“æ„

```
pulsoid-to-vrchat-python/
â”œâ”€â”€ main.py              # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ config.py            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ auth.py              # è®¤è¯æ¨¡å—
â”œâ”€â”€ websocket_client.py  # WebSocketå®¢æˆ·ç«¯
â”œâ”€â”€ osc_client.py        # OSCå®¢æˆ·ç«¯
â”œâ”€â”€ logger.py            # æ—¥å¿—é…ç½®
â”œâ”€â”€ requirements.txt     # Pythonä¾èµ–
â”œâ”€â”€ run.bat             # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ run.sh              # Linux/macOSå¯åŠ¨è„šæœ¬
â””â”€â”€ README.md           # è¯´æ˜æ–‡æ¡£
```